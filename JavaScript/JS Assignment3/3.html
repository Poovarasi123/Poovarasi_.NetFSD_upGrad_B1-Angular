<!DOCTYPE html>
<html>
<head>
    <title>Location Logger</title>
</head>
<body onload="loadHistory()">

<h2>Location-Based Weather Logger</h2>

<button onclick="getLocation()">Get My Location</button>

<h3>Current Location:</h3>
<p id="currentLocation"></p>

<h3>Last 5 Locations:</h3>
<ul id="locationHistory"></ul>

<script>

function getLocation() {

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
    } else {
        alert("Geolocation is not supported by this browser.");
    }
}

function successCallback(position) {

    let latitude = position.coords.latitude;
    let longitude = position.coords.longitude;

    let locationText = "Latitude: " + latitude + 
                       " | Longitude: " + longitude;

    document.getElementById("currentLocation").textContent = locationText;

    saveLocation(latitude, longitude);
}

function errorCallback(error) {

    if (error.code === error.PERMISSION_DENIED) {
        alert("Permission denied by user.");
    } else if (error.code === error.TIMEOUT) {
        alert("Request timed out.");
    } else if (error.code === error.POSITION_UNAVAILABLE) {
        alert("Location unavailable.");
    } else {
        alert("Unknown error occurred.");
    }
}

function saveLocation(lat, long) {

    let history = JSON.parse(localStorage.getItem("locationHistory")) || [];

    history.push({
        latitude: lat,
        longitude: long,
        time: new Date().toLocaleString()
    });

    if (history.length > 5) {
        history.shift();   
    }

    localStorage.setItem("locationHistory", JSON.stringify(history));

    displayHistory();
}

function loadHistory() {
    displayHistory();
}

function displayHistory() {

    let history = JSON.parse(localStorage.getItem("locationHistory")) || [];
    let list = document.getElementById("locationHistory");

    list.innerHTML = "";

    history.forEach(function(entry) {
        let li = document.createElement("li");
        li.textContent = 
            "Lat: " + entry.latitude + 
            ", Long: " + entry.longitude + 
            " (" + entry.time + ")";
        list.appendChild(li);
    });
}

</script>

</body>
</html>